{
    "openapi": "3.1.0",
    "info": {
        "title": "Timetable Service",
        "description": "API REST conforme au cahier des charges avec authentification par en-têtes",
        "version": "1.0.0"
    },
    "paths": {
        "/health": {
            "get": {
                "tags": [
                    "Health"
                ],
                "summary": "Health",
                "operationId": "health_health_get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    }
                }
            }
        },
        "/rooms/": {
            "post": {
                "tags": [
                    "Rooms"
                ],
                "summary": "Create Room",
                "description": "Créer une salle. Rôles: ADMIN, COORDONNATEUR",
                "operationId": "create_room_rooms__post",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/RoomCreate"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/RoomRead"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "tags": [
                    "Rooms"
                ],
                "summary": "List Rooms",
                "description": "Lister les salles (optionnellement filtrées par établissement).",
                "operationId": "list_rooms_rooms__get",
                "parameters": [
                    {
                        "name": "skip",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 0,
                            "title": "Skip"
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 100,
                            "title": "Limit"
                        }
                    },
                    {
                        "name": "establishment_id",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "string",
                                    "format": "uuid"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "title": "Establishment Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/RoomRead"
                                    },
                                    "title": "Response List Rooms Rooms  Get"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/rooms/{room_id}": {
            "get": {
                "tags": [
                    "Rooms"
                ],
                "summary": "Get Room",
                "description": "Récupérer une salle par ID.",
                "operationId": "get_room_rooms__room_id__get",
                "parameters": [
                    {
                        "name": "room_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Room Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/RoomRead"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "patch": {
                "tags": [
                    "Rooms"
                ],
                "summary": "Update Room",
                "description": "Mettre à jour une salle. Rôles: ADMIN, COORDONNATEUR",
                "operationId": "update_room_rooms__room_id__patch",
                "parameters": [
                    {
                        "name": "room_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Room Id"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/RoomUpdate"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/RoomRead"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "Rooms"
                ],
                "summary": "Delete Room",
                "description": "Supprimer une salle. Rôles: ADMIN, COORDONNATEUR",
                "operationId": "delete_room_rooms__room_id__delete",
                "parameters": [
                    {
                        "name": "room_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Room Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/RoomRead"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/timeslots/": {
            "post": {
                "tags": [
                    "Timeslots"
                ],
                "summary": "Create Timeslot",
                "description": "Créer un créneau horaire. Rôles: ADMIN, COORDONNATEUR",
                "operationId": "create_timeslot_timeslots__post",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/TimeslotCreate"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/TimeslotRead"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "tags": [
                    "Timeslots"
                ],
                "summary": "List Timeslots",
                "description": "Lister les créneaux horaires (optionnellement filtrés par établissement).",
                "operationId": "list_timeslots_timeslots__get",
                "parameters": [
                    {
                        "name": "skip",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 0,
                            "title": "Skip"
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 100,
                            "title": "Limit"
                        }
                    },
                    {
                        "name": "establishment_id",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "string",
                                    "format": "uuid"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "title": "Establishment Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/TimeslotRead"
                                    },
                                    "title": "Response List Timeslots Timeslots  Get"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/timeslots/{timeslot_id}": {
            "get": {
                "tags": [
                    "Timeslots"
                ],
                "summary": "Get Timeslot",
                "description": "Récupérer un créneau horaire par ID.",
                "operationId": "get_timeslot_timeslots__timeslot_id__get",
                "parameters": [
                    {
                        "name": "timeslot_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Timeslot Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/TimeslotRead"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "patch": {
                "tags": [
                    "Timeslots"
                ],
                "summary": "Update Timeslot",
                "description": "Mettre à jour un créneau horaire. Rôles: ADMIN, COORDONNATEUR",
                "operationId": "update_timeslot_timeslots__timeslot_id__patch",
                "parameters": [
                    {
                        "name": "timeslot_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Timeslot Id"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/TimeslotUpdate"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/TimeslotRead"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "Timeslots"
                ],
                "summary": "Delete Timeslot",
                "description": "Supprimer un créneau horaire. Rôles: ADMIN, COORDONNATEUR",
                "operationId": "delete_timeslot_timeslots__timeslot_id__delete",
                "parameters": [
                    {
                        "name": "timeslot_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Timeslot Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/TimeslotRead"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/lessons/": {
            "post": {
                "tags": [
                    "Lessons"
                ],
                "summary": "Create Lessons",
                "description": "Créer un cours ou une série (repeatweekly). Rôles: ENSEIGNANT, COORDONNATEUR, ADMIN",
                "operationId": "create_lessons_lessons__post",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/LessonCreate"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/LessonRead"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "tags": [
                    "Lessons"
                ],
                "summary": "List Lessons",
                "description": "Lister les cours (filtres: classe, prof, dates). Rôles: tous. PARENT: accès restreint.",
                "operationId": "list_lessons_lessons__get",
                "parameters": [
                    {
                        "name": "class_id",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "string",
                                    "format": "uuid"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "title": "Class Id"
                        }
                    },
                    {
                        "name": "from_date",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "string",
                                    "format": "date"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "title": "From Date"
                        }
                    },
                    {
                        "name": "to_date",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "string",
                                    "format": "date"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "title": "To Date"
                        }
                    },
                    {
                        "name": "teacher_id",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "string",
                                    "format": "uuid"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "title": "Teacher Id"
                        }
                    },
                    {
                        "name": "skip",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 0,
                            "title": "Skip"
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 100,
                            "title": "Limit"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/LessonRead"
                                    },
                                    "title": "Response List Lessons Lessons  Get"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/lessons/{lesson_id}": {
            "patch": {
                "tags": [
                    "Lessons"
                ],
                "summary": "Update Lesson",
                "description": "Mettre à jour salle/timeslot. Vérifie conflit. Rôles: ENSEIGNANT, COORDONNATEUR, ADMIN",
                "operationId": "update_lesson_lessons__lesson_id__patch",
                "parameters": [
                    {
                        "name": "lesson_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Lesson Id"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/LessonUpdate"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/LessonRead"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "Lessons"
                ],
                "summary": "Delete Lesson",
                "description": "Supprimer un cours. Rôles: COORDONNATEUR, ADMIN",
                "operationId": "delete_lesson_lessons__lesson_id__delete",
                "parameters": [
                    {
                        "name": "lesson_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Lesson Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/LessonRead"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/absences/": {
            "post": {
                "tags": [
                    "Absences"
                ],
                "summary": "Create Absence",
                "description": "Déclarer une absence (status REPORTED). Rôles: ENSEIGNANT, COORDONNATEUR, ADMIN",
                "operationId": "create_absence_absences__post",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AbsenceCreate"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/AbsenceRead"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "tags": [
                    "Absences"
                ],
                "summary": "List Absences",
                "description": "Lister les absences.",
                "operationId": "list_absences_absences__get",
                "parameters": [
                    {
                        "name": "skip",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 0,
                            "title": "Skip"
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 100,
                            "title": "Limit"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/AbsenceRead"
                                    },
                                    "title": "Response List Absences Absences  Get"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/absences/{absence_id}/validate": {
            "post": {
                "tags": [
                    "Absences"
                ],
                "summary": "Validate Absence",
                "description": "Valider une absence (status VALIDATED). Rôle: DIRECTION. Propage le status sur les lessons du créneau.",
                "operationId": "validate_absence_absences__absence_id__validate_post",
                "parameters": [
                    {
                        "name": "absence_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Absence Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/AbsenceRead"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/absences/{absence_id}": {
            "delete": {
                "tags": [
                    "Absences"
                ],
                "summary": "Delete Absence",
                "description": "Supprimer une absence. Rôles: COORDONNATEUR, ADMIN",
                "operationId": "delete_absence_absences__absence_id__delete",
                "parameters": [
                    {
                        "name": "absence_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Absence Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/AbsenceRead"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/replacements/": {
            "post": {
                "tags": [
                    "Replacements"
                ],
                "summary": "Create Replacement",
                "description": "Créer un remplacement (status=REPLACED). Rôles: COORDONNATEUR, DIRECTION, ADMIN",
                "operationId": "create_replacement_replacements__post",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ReplacementCreate"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ReplacementRead"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "tags": [
                    "Replacements"
                ],
                "summary": "List Replacements",
                "description": "Lister les remplacements.",
                "operationId": "list_replacements_replacements__get",
                "parameters": [
                    {
                        "name": "skip",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 0,
                            "title": "Skip"
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 100,
                            "title": "Limit"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/ReplacementRead"
                                    },
                                    "title": "Response List Replacements Replacements  Get"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/replacements/{replacement_id}": {
            "delete": {
                "tags": [
                    "Replacements"
                ],
                "summary": "Delete Replacement",
                "description": "Supprimer un remplacement. Rôles: COORDONNATEUR, ADMIN",
                "operationId": "delete_replacement_replacements__replacement_id__delete",
                "parameters": [
                    {
                        "name": "replacement_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Replacement Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ReplacementRead"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/feed/{class_id}.ics": {
            "get": {
                "tags": [
                    "Feed"
                ],
                "summary": "Get Ics Feed",
                "description": "Flux iCalendar pour une classe.",
                "operationId": "get_ics_feed_feed__class_id__ics_get",
                "parameters": [
                    {
                        "name": "class_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Class Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/lessons/{lesson_id}/audit": {
            "get": {
                "tags": [
                    "Audit"
                ],
                "summary": "Get Lesson Audit",
                "description": "Journal d'audit pour un cours. Rôle: DIRECTION",
                "operationId": "get_lesson_audit_lessons__lesson_id__audit_get",
                "parameters": [
                    {
                        "name": "lesson_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Lesson Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/TimetableAuditRead"
                                    },
                                    "title": "Response Get Lesson Audit Lessons  Lesson Id  Audit Get"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/audit/": {
            "get": {
                "tags": [
                    "Audit"
                ],
                "summary": "Get Audit Trail",
                "description": "Journal d'audit complet. Rôle: DIRECTION, ADMIN",
                "operationId": "get_audit_trail_audit__get",
                "parameters": [
                    {
                        "name": "skip",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 0,
                            "title": "Skip"
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 100,
                            "title": "Limit"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/TimetableAuditRead"
                                    },
                                    "title": "Response Get Audit Trail Audit  Get"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "AbsenceCreate": {
                "properties": {
                    "teacher_id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Teacher Id"
                    },
                    "date": {
                        "type": "string",
                        "format": "date",
                        "title": "Date"
                    },
                    "timeslot_id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Timeslot Id"
                    },
                    "reason": {
                        "type": "string",
                        "title": "Reason"
                    },
                    "status": {
                        "$ref": "#/components/schemas/AbsenceStatus",
                        "default": "REPORTED"
                    }
                },
                "type": "object",
                "required": [
                    "teacher_id",
                    "date",
                    "timeslot_id",
                    "reason"
                ],
                "title": "AbsenceCreate"
            },
            "AbsenceRead": {
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Id"
                    },
                    "teacher_id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Teacher Id"
                    },
                    "date": {
                        "type": "string",
                        "format": "date",
                        "title": "Date"
                    },
                    "timeslot_id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Timeslot Id"
                    },
                    "reason": {
                        "type": "string",
                        "title": "Reason"
                    },
                    "status": {
                        "$ref": "#/components/schemas/AbsenceStatus"
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "title": "Created At"
                    },
                    "created_by": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Created By"
                    }
                },
                "type": "object",
                "required": [
                    "id",
                    "teacher_id",
                    "date",
                    "timeslot_id",
                    "reason",
                    "status",
                    "created_at",
                    "created_by"
                ],
                "title": "AbsenceRead"
            },
            "AbsenceStatus": {
                "type": "string",
                "enum": [
                    "REPORTED",
                    "VALIDATED"
                ],
                "title": "AbsenceStatus"
            },
            "HTTPValidationError": {
                "properties": {
                    "detail": {
                        "items": {
                            "$ref": "#/components/schemas/ValidationError"
                        },
                        "type": "array",
                        "title": "Detail"
                    }
                },
                "type": "object",
                "title": "HTTPValidationError"
            },
            "LessonCreate": {
                "properties": {
                    "class_id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Class Id"
                    },
                    "subject_id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Subject Id"
                    },
                    "teacher_id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Teacher Id"
                    },
                    "date": {
                        "type": "string",
                        "format": "date",
                        "title": "Date"
                    },
                    "timeslot_id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Timeslot Id"
                    },
                    "room_id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Room Id"
                    },
                    "status": {
                        "$ref": "#/components/schemas/LessonStatus",
                        "default": "SCHEDULED"
                    },
                    "repeatweekly": {
                        "type": "integer",
                        "title": "Repeatweekly",
                        "default": 1
                    }
                },
                "type": "object",
                "required": [
                    "class_id",
                    "subject_id",
                    "teacher_id",
                    "date",
                    "timeslot_id",
                    "room_id"
                ],
                "title": "LessonCreate"
            },
            "LessonRead": {
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Id"
                    },
                    "class_id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Class Id"
                    },
                    "subject_id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Subject Id"
                    },
                    "teacher_id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Teacher Id"
                    },
                    "date": {
                        "type": "string",
                        "format": "date",
                        "title": "Date"
                    },
                    "timeslot_id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Timeslot Id"
                    },
                    "room_id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Room Id"
                    },
                    "status": {
                        "$ref": "#/components/schemas/LessonStatus"
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "title": "Created At"
                    },
                    "created_by": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Created By"
                    }
                },
                "type": "object",
                "required": [
                    "id",
                    "class_id",
                    "subject_id",
                    "teacher_id",
                    "date",
                    "timeslot_id",
                    "room_id",
                    "status",
                    "created_at",
                    "created_by"
                ],
                "title": "LessonRead"
            },
            "LessonStatus": {
                "type": "string",
                "enum": [
                    "SCHEDULED",
                    "CANCELLED",
                    "REPLACED"
                ],
                "title": "LessonStatus"
            },
            "LessonUpdate": {
                "properties": {
                    "room_id": {
                        "anyOf": [
                            {
                                "type": "string",
                                "format": "uuid"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Room Id"
                    },
                    "timeslot_id": {
                        "anyOf": [
                            {
                                "type": "string",
                                "format": "uuid"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Timeslot Id"
                    },
                    "status": {
                        "anyOf": [
                            {
                                "$ref": "#/components/schemas/LessonStatus"
                            },
                            {
                                "type": "null"
                            }
                        ]
                    }
                },
                "type": "object",
                "title": "LessonUpdate"
            },
            "ReplacementCreate": {
                "properties": {
                    "lesson_id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Lesson Id"
                    },
                    "new_teacher_id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "New Teacher Id"
                    },
                    "validated_by": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Validated By"
                    }
                },
                "type": "object",
                "required": [
                    "lesson_id",
                    "new_teacher_id",
                    "validated_by"
                ],
                "title": "ReplacementCreate"
            },
            "ReplacementRead": {
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Id"
                    },
                    "lesson_id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Lesson Id"
                    },
                    "old_teacher_id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Old Teacher Id"
                    },
                    "new_teacher_id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "New Teacher Id"
                    },
                    "validated_by": {
                        "anyOf": [
                            {
                                "type": "string",
                                "format": "uuid"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Validated By"
                    },
                    "validated_at": {
                        "anyOf": [
                            {
                                "type": "string",
                                "format": "date-time"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Validated At"
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "title": "Created At"
                    },
                    "created_by": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Created By"
                    }
                },
                "type": "object",
                "required": [
                    "id",
                    "lesson_id",
                    "old_teacher_id",
                    "new_teacher_id",
                    "created_at",
                    "created_by"
                ],
                "title": "ReplacementRead"
            },
            "RoomCreate": {
                "properties": {
                    "name": {
                        "type": "string",
                        "title": "Name"
                    },
                    "capacity": {
                        "type": "integer",
                        "title": "Capacity"
                    },
                    "establishment_id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Establishment Id"
                    },
                    "building_id": {
                        "anyOf": [
                            {
                                "type": "string",
                                "format": "uuid"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Building Id"
                    }
                },
                "type": "object",
                "required": [
                    "name",
                    "capacity",
                    "establishment_id"
                ],
                "title": "RoomCreate"
            },
            "RoomRead": {
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Id"
                    },
                    "name": {
                        "type": "string",
                        "title": "Name"
                    },
                    "capacity": {
                        "type": "integer",
                        "title": "Capacity"
                    },
                    "establishment_id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Establishment Id"
                    },
                    "building_id": {
                        "anyOf": [
                            {
                                "type": "string",
                                "format": "uuid"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Building Id"
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "title": "Created At"
                    },
                    "created_by": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Created By"
                    }
                },
                "type": "object",
                "required": [
                    "id",
                    "name",
                    "capacity",
                    "establishment_id",
                    "created_at",
                    "created_by"
                ],
                "title": "RoomRead"
            },
            "RoomUpdate": {
                "properties": {
                    "name": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Name"
                    },
                    "capacity": {
                        "anyOf": [
                            {
                                "type": "integer"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Capacity"
                    },
                    "building_id": {
                        "anyOf": [
                            {
                                "type": "string",
                                "format": "uuid"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Building Id"
                    }
                },
                "type": "object",
                "title": "RoomUpdate"
            },
            "TimeslotCreate": {
                "properties": {
                    "start_time": {
                        "type": "string",
                        "format": "time",
                        "title": "Start Time"
                    },
                    "end_time": {
                        "type": "string",
                        "format": "time",
                        "title": "End Time"
                    },
                    "establishment_id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Establishment Id"
                    }
                },
                "type": "object",
                "required": [
                    "start_time",
                    "end_time",
                    "establishment_id"
                ],
                "title": "TimeslotCreate"
            },
            "TimeslotRead": {
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Id"
                    },
                    "start_time": {
                        "type": "string",
                        "format": "time",
                        "title": "Start Time"
                    },
                    "end_time": {
                        "type": "string",
                        "format": "time",
                        "title": "End Time"
                    },
                    "establishment_id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Establishment Id"
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "title": "Created At"
                    },
                    "created_by": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Created By"
                    }
                },
                "type": "object",
                "required": [
                    "id",
                    "start_time",
                    "end_time",
                    "establishment_id",
                    "created_at",
                    "created_by"
                ],
                "title": "TimeslotRead"
            },
            "TimeslotUpdate": {
                "properties": {
                    "start_time": {
                        "anyOf": [
                            {
                                "type": "string",
                                "format": "time"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Start Time"
                    },
                    "end_time": {
                        "anyOf": [
                            {
                                "type": "string",
                                "format": "time"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "End Time"
                    }
                },
                "type": "object",
                "title": "TimeslotUpdate"
            },
            "TimetableAuditRead": {
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Id"
                    },
                    "entity_type": {
                        "type": "string",
                        "title": "Entity Type"
                    },
                    "entity_id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Entity Id"
                    },
                    "action": {
                        "type": "string",
                        "title": "Action"
                    },
                    "actor_id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Actor Id"
                    },
                    "actor_role": {
                        "type": "string",
                        "title": "Actor Role"
                    },
                    "diff": {
                        "additionalProperties": true,
                        "type": "object",
                        "title": "Diff"
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "title": "Created At"
                    },
                    "updated_at": {
                        "anyOf": [
                            {
                                "type": "string",
                                "format": "date-time"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Updated At"
                    },
                    "updated_by": {
                        "anyOf": [
                            {
                                "type": "string",
                                "format": "uuid"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Updated By"
                    },
                    "deleted_at": {
                        "anyOf": [
                            {
                                "type": "string",
                                "format": "date-time"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Deleted At"
                    },
                    "deleted_by": {
                        "anyOf": [
                            {
                                "type": "string",
                                "format": "uuid"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Deleted By"
                    }
                },
                "type": "object",
                "required": [
                    "id",
                    "entity_type",
                    "entity_id",
                    "action",
                    "actor_id",
                    "actor_role",
                    "diff",
                    "created_at"
                ],
                "title": "TimetableAuditRead"
            },
            "ValidationError": {
                "properties": {
                    "loc": {
                        "items": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "type": "integer"
                                }
                            ]
                        },
                        "type": "array",
                        "title": "Location"
                    },
                    "msg": {
                        "type": "string",
                        "title": "Message"
                    },
                    "type": {
                        "type": "string",
                        "title": "Error Type"
                    }
                },
                "type": "object",
                "required": [
                    "loc",
                    "msg",
                    "type"
                ],
                "title": "ValidationError"
            }
        }
    }
}